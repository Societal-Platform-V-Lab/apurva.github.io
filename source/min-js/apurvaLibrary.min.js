function limitText(e,t){return e.length>t?e.slice(0,t)+"...":e}function renderCards(e){const t=document.getElementById("card-deck-container");t.innerHTML="";const n=[];let s=!1;e.forEach(e=>{const{category:t,imagePath:a,author:r,readTime:o,date:c,title:i,URL:d}=e;if("Articles"===t||"Stories"===t){const e=limitText(i,55);n.push(`\n          <div class="col-lg-4 col-sm-6 mt-5 d-none d-sm-block">\n            <a href="${d}" target="#">\n              <div class="card">\n                <div class="card-header">\n                  <span class="badge badge-pill badge-info">${t}</span>\n                  <img src="${a}" class="card-img-top" alt="img">\n                </div>\n                <div class="card-body">\n                  <h5 class="card-title">${r} | ${o} | ${c}</h5>\n                  <p class="card-text">${i}</p>\n                </div>\n              </div>\n            </a>\n          </div> \n          <a href="${d}" target="#"> \n        <div class="blog d-sm-block d-md-none border-bottom">  \n        \n              <h6 class="card-title text-left">${r}</h6>\n              <div class="blogcontent">\n                 <div class="row "> \n                    <div class="col-7">\n                     <p class="crad-blogtext">${e}</p>\n                   </div>\n                    <div class="col-5">\n                      <img src="${a}" class="card-blogimg" >\n                    </div>\n                  </div>\n               </div>\n               <div class ="category">\n                 <h6> ${t} </h6>\n                 <h5>${o}</h5>\n                 <h5>${c}</h5>\n                </div>\n                \n               \n          </div>           \n        </a>\n        \n        `),s=!0}}),s||n.push('<p class="impact-coming-soon mt-5">COMING SOON...</p>'),t.innerHTML=n.join("")}function removeActiveClass(){showAllButton.classList.remove("active"),showBlogsButton.classList.remove("active"),showImpactStoriesButton.classList.remove("active")}function renderButtons(e,t=!1){const n=document.getElementById("carousel-inner-cards");n.innerHTML="";const s=window.innerWidth<500;e.forEach((e,a)=>{const r=`\n      <div class="carousel-item ${s?"":t&&"opacity-reduced"}  col-md-4">\n        <div class="card apurva-explains-card">\n          <div class="card-body apurva-explains-card-body">\n            <h5 class="card-title apurva-explains-card-title">\n              ${e.btnTitle}\n            </h5>\n          </div>\n        </div>\n        <div class="mt-5 card-description  ${s?"d-block":!t&&" d-none"}">\n           <p>${e.apurvaExplainsContent}</p>\n        </div>\n      </div>\n    `;n.insertAdjacentHTML("beforeend",r)}),$("#theCarousel").carousel({interval:!1}),$("#theCarousel").on("slid.bs.carousel",function(e){const t=$(".carousel-item.active").index(),n=e.direction;$(".carousel-item.opacity-reduced");"left"===n?($(".carousel-item").eq(t).removeClass("opacity-reduced"),$(".carousel-item").eq(t+1).addClass("opacity-reduced"),$(".carousel-item").eq(t+1).find(".card-description").removeClass("d-none"),$(".carousel-item").eq(t).find(".card-description").addClass("d-none")):"right"===n&&($(".carousel-item").eq(t+2).removeClass("opacity-reduced"),$(".carousel-item").eq(t+1).addClass("opacity-reduced"),$(".carousel-item").eq(t+1).find(".card-description").removeClass("d-none"),$(".carousel-item").eq(t+2).find(".card-description").addClass("d-none"))}),$(".carousel-item").eq(0).addClass("active").next().addClass("opacity-reduced"),$(".carousel-item").eq(0).next().find(".card-description").removeClass("d-none")}function search(){const e=searchInput.value.toLowerCase(),t=e.split(" ").filter(e=>""!==e.trim());searchResults.innerHTML="",e.trim().length?fetch("data.json").then(e=>e.json()).then(e=>{if(Array.isArray(e.apurvaExplains)){const n=e.apurvaExplains.filter(e=>t.every(t=>e.btnTitle.toLowerCase().includes(t)));n.length>0?renderButtons(n,!0):searchResults.innerHTML='\n          <p class="search-not-found">No search results found.</p>\n          '}}).catch(e=>{console.error("Error:",e)}):initialFetch()}fetch("data.json").then(e=>e.json()).then(e=>{renderCards(e.apurvaStories)}).catch(e=>{console.error("Error:",e)});const showAllButton=document.getElementById("all-btn"),showBlogsButton=document.getElementById("blogs-btn"),showImpactStoriesButton=document.getElementById("impact-stories-btn");showAllButton.addEventListener("click",()=>{fetch("data.json").then(e=>e.json()).then(e=>{renderCards(e.apurvaStories),removeActiveClass(),showAllButton.classList.add("active")}).catch(e=>{console.error("Error:",e)})}),showBlogsButton.addEventListener("click",()=>{fetch("data.json").then(e=>e.json()).then(e=>{const t=e.apurvaStories.filter(e=>"Articles"===e.category);renderCards(t),removeActiveClass(),showBlogsButton.classList.add("active")}).catch(e=>{console.error("Error:",e)})}),showImpactStoriesButton.addEventListener("click",()=>{fetch("data.json").then(e=>e.json()).then(e=>{const t=e.apurvaStories.filter(e=>"Stories"===e.category);renderCards(t),removeActiveClass(),showImpactStoriesButton.classList.add("active")}).catch(e=>{console.error("Error:",e)})}),$(".multi-item-carousel").on("slide.bs.carousel",function(e){let t=$(e.relatedTarget),n=3,s=$(".carousel-item",this).length,a=$(".carousel-inner",this),r=n-(s-t.index());if(r>0)for(var o=0;o<r;o++)$(".carousel-item",this).eq("left"==e.direction?o:0).appendTo(a)});const initialFetch=()=>{fetch("data.json").then(e=>e.json()).then(e=>{renderButtons(e.apurvaExplains)}).catch(e=>{console.error("Error:",e)})};initialFetch();const searchInput=document.getElementById("searchInput"),searchResults=document.getElementById("carousel-inner-cards");searchInput.addEventListener("input",search);